name: docs

on:
  push:
    branches: [ development ]
    paths: [ '**.java' ]

jobs:
  javadoc:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout the repo
      uses: actions/checkout@v2
    
    - name: Set up JDK 1.11
      uses: actions/setup-java@v1
      with:
        java-version: 1.11
    
    - name: Build with Ant
      run: ant -noinput -buildfile build/builddocs.xml
    
    - name: Create Pull Request
      uses: peter-evans/create-pull-request@v3.4.0
      with:
        title: "Automated doc website update"
        body: > 
          Automated API doc website update.
          Automated pull-request generated by 
          [create-pull-request](https://github.com/peter-evans/create-pull-request) GitHub action.
        commit-message: "[automated change]"
        delete-branch: true
